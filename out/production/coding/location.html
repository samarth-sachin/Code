<!DOCTYPE html>
<html>
<head>
  <title>Location Notification</title>
</head>
<body>
  <script>
    // Function to get the user's location
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }

    // Function to handle the position
    function showPosition(position) {
      var latitude = position.coords.latitude;
      var longitude = position.coords.longitude;

      // Bibwewadi, Pune coordinates
      var bibwewadiLat = 18.4634;
      var bibwewadiLong = 73.8567;

      // Check if the current location is within a certain range of Bibwewadi, Pune
      var distance = getDistanceFromLatLonInKm(latitude, longitude, bibwewadiLat, bibwewadiLong);
      if (distance < 1) { // within 1 km
        notifyUser("You are in Bibwewadi, Pune");
      }
    }

    // Function to handle errors
    function showError(error) {
      alert("Error getting your location: " + error.message);
    }

    // Function to calculate distance between two coordinates
    function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
      var R = 6371; // Radius of the earth in km
      var dLat = deg2rad(lat2 - lat1);
      var dLon = deg2rad(lon2 - lon1);
      var a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      var d = R * c; // Distance in km
      return d;
    }

    function deg2rad(deg) {
      return deg * (Math.PI / 180);
    }

    // Notification function
    function notifyUser(message) {
      if (Notification.permission === "granted") {
        new Notification(message);
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
          if (permission === "granted") {
            new Notification(message);
          }
        });
      } else {
        alert(message);
      }
    }

    // Request location on page load
    window.onload = getLocation;
  </script>
</body>
</html>